{% extends "base.html" %}

{% block content %}
<!-- Hero Section - O Casal -->
<section class="hero hero-couple" id="hero-couple">
    <div class="hero-background">
        <div class="hero-overlay"></div>
    </div>
    
    <div class="hero-content">
        <div class="container">
            <h1 class="page-title heading-script">
                Conheçam Nossa História
            </h1>
            
            <p class="page-subtitle text-large text-center">
                A jornada que nos trouxe até aqui ♥
            </p>
        </div>
    </div>
</section>

<!-- Seção do Casal -->
<section class="couple-section section" id="couple-info">
    <div class="container">
        <div class="couple-grid">
            <!-- Sobre a Noiva -->
            <div class="couple-card bride-card">
                <div class="couple-photo">
                    {% if config.foto_noiva %}
                        <img src="{{ config.foto_noiva }}" alt="{{ config.nome_noiva or 'Noiva' }}" class="couple-img">
                    {% else %}
                        <div class="photo-placeholder">
                            <i class="fas fa-heart"></i>
                        </div>
                    {% endif %}
                </div>
                <div class="couple-info">
                    <h3 class="couple-name heading-script">{{ config.nome_noiva or 'Iara' }}</h3>
                    <div class="couple-role">A Noiva</div>
                    <div class="couple-description">
                        <p>{{ config.descricao_noiva or 'Uma mulher de fé, cheia de sonhos e amor no coração. Apaixonada pela vida e por fazer cada momento especial ao lado de quem ama.' }}</p>
                        <div class="couple-details">
                            {% if config.aniversario_noiva %}
                            <div class="detail-item">
                                <i class="fas fa-birthday-cake"></i>
                                <span>Aniversário: {{ config.aniversario_noiva }}</span>
                            </div>
                            {% endif %}
                            {% if config.paixoes_noiva %}
                            <div class="detail-item">
                                <i class="fas fa-heart"></i>
                                <span>Paixões: {{ config.paixoes_noiva }}</span>
                            </div>
                            {% endif %}
                            {% if config.frase_noiva %}
                            <div class="detail-item">
                                <i class="fas fa-quote-left"></i>
                                <span>"{{ config.frase_noiva }}"</span>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sobre o Noivo -->
            <div class="couple-card groom-card">
                <div class="couple-photo">
                    {% if config.foto_noivo %}
                        <img src="{{ config.foto_noivo }}" alt="{{ config.nome_noivo or 'Noivo' }}" class="couple-img">
                    {% else %}
                        <div class="photo-placeholder">
                            <i class="fas fa-heart"></i>
                        </div>
                    {% endif %}
                </div>
                <div class="couple-info">
                    <h3 class="couple-name heading-script">{{ config.nome_noivo or 'Samuel' }}</h3>
                    <div class="couple-role">O Noivo</div>
                    <div class="couple-description">
                        <p>{{ config.descricao_noivo or 'Um homem dedicado, com coração generoso e sorriso que ilumina qualquer ambiente. Sempre pronto para uma nova aventura ao lado de sua amada.' }}</p>
                        <div class="couple-details">
                            {% if config.aniversario_noivo %}
                            <div class="detail-item">
                                <i class="fas fa-birthday-cake"></i>
                                <span>Aniversário: {{ config.aniversario_noivo }}</span>
                            </div>
                            {% endif %}
                            {% if config.paixoes_noivo %}
                            <div class="detail-item">
                                <i class="fas fa-heart"></i>
                                <span>Paixões: {{ config.paixoes_noivo }}</span>
                            </div>
                            {% endif %}
                            {% if config.frase_noivo %}
                            <div class="detail-item">
                                <i class="fas fa-quote-left"></i>
                                <span>"{{ config.frase_noivo }}"</span>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Nossa História (Opcional) -->
        {% if config.mostrar_historia is not defined or config.mostrar_historia %}
        <div class="love-story-section">
            <h2 class="section-title heading-serif">Nossa História de Amor</h2>
            
            <div class="timeline-love">
                {% if config.primeiro_encontro_ano or config.primeiro_encontro_texto %}
                <div class="timeline-item">
                    <div class="timeline-date">{{ config.primeiro_encontro_ano or '2020' }}</div>
                    <div class="timeline-content">
                        <h4>O Primeiro Encontro</h4>
                        <p>{{ config.primeiro_encontro_texto or 'Foi em uma tarde de domingo, na igreja, que nossos olhares se cruzaram pela primeira vez. O que começou como uma amizade especial, logo se transformou em algo muito maior.' }}</p>
                    </div>
                </div>
                {% endif %}
                
                {% if config.namoro_ano or config.namoro_texto %}
                <div class="timeline-item">
                    <div class="timeline-date">{{ config.namoro_ano or '2022' }}</div>
                    <div class="timeline-content">
                        <h4>O Namoro</h4>
                        <p>{{ config.namoro_texto or 'Depois de dois anos de amizade, decidimos dar o próximo passo. Foi um período de descobertas, crescimento mútuo e muito amor.' }}</p>
                    </div>
                </div>
                {% endif %}
                
                {% if config.pedido_ano or config.pedido_texto %}
                <div class="timeline-item">
                    <div class="timeline-date">{{ config.pedido_ano or '2024' }}</div>
                    <div class="timeline-content">
                        <h4>O Pedido</h4>
                        <p>{{ config.pedido_texto or 'Em uma noite estrelada, com o coração cheio de amor e certeza, veio o pedido de casamento. Um momento mágico que ficará para sempre em nossas memórias.' }}</p>
                    </div>
                </div>
                {% endif %}
                
                {% if config.grande_dia_ano or config.grande_dia_texto %}
                <div class="timeline-item">
                    <div class="timeline-date">{{ config.grande_dia_ano or '2025' }}</div>
                    <div class="timeline-content">
                        <h4>O Grande Dia</h4>
                        <p>{{ config.grande_dia_texto or 'E agora chegou o momento de unirmos nossas vidas para sempre, na presença de Deus e de todos que amamos. Será um dia inesquecível!' }}</p>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Navegação -->
        <div class="step-navigation-bottom">
            <a href="{{ url_for('main.index') }}" class="btn btn-step-prev">
                <i class="fas fa-arrow-left"></i>
                <span>Voltar ao Início</span>
            </a>
            <a href="{{ url_for('main.local') }}" class="btn btn-step-next">
                <span>Ver Local da Cerimônia</span>
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
</section>

<script>
// Script para rolagem automática suave até as informações do casal
document.addEventListener('DOMContentLoaded', function() {
    // Aguardar um pequeno delay para a página carregar completamente
    setTimeout(function() {
        // Encontrar a seção das informações do casal
        const coupleSection = document.getElementById('couple-info');
        
        if (coupleSection) {
            // Calcular posição para scroll suave
            const headerHeight = 80; // Altura aproximada do header
            const targetPosition = coupleSection.offsetTop - headerHeight;
            
            // Scroll suave com animação
            window.scrollTo({
                top: targetPosition,
                behavior: 'smooth'
            });
        }
    }, 1500); // Delay de 1.5 segundos para mostrar primeiro o título
});

// Animação de entrada para os cards do casal
function animateCards() {
    const cards = document.querySelectorAll('.couple-card');
    
    cards.forEach((card, index) => {
        // Aplicar delay escalonado para cada card
        setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, 500 + (index * 300)); // 500ms base + 300ms para cada card
    });
}

// Observador para animar quando os cards ficam visíveis
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            animateCards();
            observer.unobserve(entry.target); // Parar de observar após animar
        }
    });
}, {
    threshold: 0.3 // Animar quando 30% da seção estiver visível
});

// Iniciar observação quando a página carregar
document.addEventListener('DOMContentLoaded', function() {
    const coupleSection = document.getElementById('couple-info');
    if (coupleSection) {
        // Preparar cards para animação
        const cards = document.querySelectorAll('.couple-card');
        cards.forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = 'all 0.6s ease';
        });
        
        observer.observe(coupleSection);
    }
    
    // Verificar imagens quebradas e substituir por placeholder
    const coupleImages = document.querySelectorAll('.couple-img');
    coupleImages.forEach(img => {
        img.addEventListener('error', function() {
            console.log('Erro ao carregar imagem:', this.src);
            
            // Criar placeholder
            const placeholder = document.createElement('div');
            placeholder.className = 'photo-placeholder';
            placeholder.innerHTML = '<i class="fas fa-heart"></i><div class="error-message">Link de imagem inválido</div>';
            
            // Substituir imagem pelo placeholder
            this.parentNode.replaceChild(placeholder, this);
        });
        
        // Verificar se a imagem carregou corretamente
        img.addEventListener('load', function() {
            console.log('Imagem carregada com sucesso:', this.src);
        });
    });
});
</script>
{% endblock %}
