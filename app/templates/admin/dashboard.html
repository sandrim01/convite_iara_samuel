{% extends "base.html" %}

{% block title %}Dashboard - Painel Administrativo{% endblock %}

{% block extra_head %}
<style>
    .navbar { background: var(--white); box-shadow: var(--shadow-medium); }
    .nav-menu { margin-left: auto; }
    .admin-nav { display: flex; align-items: center; gap: 1rem; }
    .admin-welcome { color: var(--text-dark); font-weight: 500; }
    .admin-logout { color: var(--error); text-decoration: none; }
</style>
{% endblock %}

{% block content %}
<!-- Admin Header -->
<section class="admin-header">
    <div class="container">
        <div class="admin-header-content">
            <div class="admin-title-section">
                <h1 class="admin-page-title heading-primary">
                    <i class="fas fa-tachometer-alt"></i>
                    Dashboard Administrativo
                </h1>
                <p class="admin-page-subtitle text-large text-secondary">Gerencie seu site de casamento</p>
            </div>
            
            <div class="admin-actions">
                <a href="{{ url_for('main.index') }}" class="btn btn-outline" target="_blank">
                    <i class="fas fa-external-link-alt"></i>
                    <span class="text-base">Ver Site</span>
                </a>
                <a href="{{ url_for('admin.logout') }}" class="btn btn-secondary">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="text-base">Sair</span>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="admin-stats">
    <div class="container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon presence">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">{{ stats.total_convidados }}</div>
                    <div class="stat-label">Total de Convidados</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon confirmed">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">{{ stats.confirmados }}</div>
                    <div class="stat-label">Confirmados</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon reception">
                    <i class="fas fa-glass-cheers"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">{{ stats.liberados_recepcao }}</div>
                    <div class="stat-label">Liberados Recepção</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon declined">
                    <i class="fas fa-times-circle"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">{{ stats.nao_confirmados }}</div>
                    <div class="stat-label">Não Confirmados</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon gifts">
                    <i class="fas fa-gift"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">{{ stats.presentes_escolhidos }}</div>
                    <div class="stat-label">Presentes Escolhidos</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quick Actions -->
<section class="admin-quick-actions">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Ações Rápidas</h2>
        </div>
        
        <div class="quick-actions-grid">
            <button onclick="openGuestsModal()" class="quick-action-card action-button">
                <div class="action-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="action-content">
                    <h3>Gerenciar Convidados</h3>
                    <p>Visualize e gerencie confirmações de presença</p>
                </div>
                <div class="action-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
            </button>
            
            <a href="{{ url_for('admin.presentes') }}" class="quick-action-card">
                <div class="action-icon">
                    <i class="fas fa-gift"></i>
                </div>
                <div class="action-content">
                    <h3>Lista de Presentes</h3>
                    <p>Adicione, edite e gerencie presentes</p>
                </div>
                <div class="action-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
            </a>
            
            <a href="{{ url_for('main.convite_recepcao') }}" class="quick-action-card" target="_blank">
                <div class="action-icon">
                    <i class="fas fa-glass-cheers"></i>
                </div>
                <div class="action-content">
                    <h3>Convite de Recepção</h3>
                    <p>Visualizar convite para quem confirmou</p>
                </div>
                <div class="action-arrow">
                    <i class="fas fa-external-link-alt"></i>
                </div>
            </a>
            
            <button onclick="openConfigModal()" class="quick-action-card">
                <div class="action-icon">
                    <i class="fas fa-cog"></i>
                </div>
                <div class="action-content">
                    <h3>Configurações</h3>
                    <p>Edite informações do casal e evento</p>
                </div>
                <div class="action-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
            </button>
            
        </div>
    </div>
</section>

<!-- Recent Activity -->
<section class="admin-recent">
    <div class="container">
        <div class="admin-content-grid">
            <!-- Recent Confirmations -->
            <div class="admin-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-calendar-check"></i>
                        Confirmações Recentes
                    </h3>
                    <button onclick="openGuestsModal()" class="card-link link-button">Ver todos</button>
                </div>
                
                <div class="card-content">
                    {% if confirmacoes_recentes %}
                        <div class="activity-list">
                            {% for convidado in confirmacoes_recentes %}
                            <div class="activity-item">
                                <div class="activity-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">{{ convidado.nome }}</div>
                                    <div class="activity-meta">
                                        {% if convidado.confirmacao %}
                                            <span class="status confirmed">Confirmou presença</span>
                                        {% else %}
                                            <span class="status declined">Não comparecerá</span>
                                        {% endif %}
                                        <span class="activity-time">{{ convidado.data_confirmacao.strftime('%d/%m às %H:%M') }}</span>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="empty-state-small">
                            <i class="fas fa-calendar"></i>
                            <p>Nenhuma confirmação ainda</p>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Liberados para Recepção -->
            <div class="admin-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-glass-cheers"></i>
                        Liberados para Recepção
                    </h3>
                    <a href="{{ url_for('main.convite_recepcao') }}" class="card-link" target="_blank">Ver Convite</a>
                </div>
                
                <div class="card-content">
                    {% if convidados_liberados %}
                        <div class="activity-list">
                            {% for convidado in convidados_liberados %}
                            <div class="activity-item">
                                <div class="activity-avatar">
                                    <i class="fas fa-glass-cheers"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">{{ convidado.nome }}</div>
                                    <div class="activity-meta">
                                        <span class="status confirmed">Liberado para recepção</span>
                                        <span class="activity-time">{{ convidado.data_confirmacao.strftime('%d/%m às %H:%M') }}</span>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="empty-state-small">
                            <i class="fas fa-glass-cheers"></i>
                            <p>Nenhum convidado liberado ainda</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Charts Section -->
<section class="admin-charts">
    <div class="container">
        <div class="admin-content-grid">
            <!-- RSVP Chart -->
            <div class="admin-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-chart-pie"></i>
                        Status das Confirmações
                    </h3>
                </div>
                
                <div class="card-content">
                    <div class="chart-container">
                        <canvas id="rsvpChart" width="300" height="300"></canvas>
                    </div>
                    
                    <div class="chart-legend">
                        <div class="legend-item">
                            <span class="legend-color confirmed"></span>
                            <span>Confirmados ({{ stats.confirmados }})</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color declined"></span>
                            <span>Não confirmados ({{ stats.nao_confirmados }})</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color pending"></span>
                            <span>Pendentes ({{ stats.pendentes }})</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Gifts Progress -->
            <div class="admin-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-chart-bar"></i>
                        Progresso dos Presentes
                    </h3>
                </div>
                
                <div class="card-content">
                    <div class="progress-stats">
                        <div class="progress-item">
                            <div class="progress-label">
                                <span>Presentes Escolhidos</span>
                                <span>{{ stats.presentes_escolhidos }}/{{ stats.total_presentes }}</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {{ (stats.presentes_escolhidos / stats.total_presentes * 100) if stats.total_presentes > 0 else 0 }}%"></div>
                            </div>
                            <div class="progress-percent">
                                {{ "%.0f"|format((stats.presentes_escolhidos / stats.total_presentes * 100) if stats.total_presentes > 0 else 0) }}%
                            </div>
                        </div>
                    </div>
                    
                    <div class="gifts-summary">
                        <div class="summary-item">
                            <i class="fas fa-gift"></i>
                            <div>
                                <div class="summary-number">{{ stats.total_presentes }}</div>
                                <div class="summary-label">Total de Presentes</div>
                            </div>
                        </div>
                        <div class="summary-item">
                            <i class="fas fa-check"></i>
                            <div>
                                <div class="summary-number">{{ stats.presentes_escolhidos }}</div>
                                <div class="summary-label">Escolhidos</div>
                            </div>
                        </div>
                        <div class="summary-item">
                            <i class="fas fa-clock"></i>
                            <div>
                                <div class="summary-number">{{ stats.total_presentes - stats.presentes_escolhidos }}</div>
                                <div class="summary-label">Disponíveis</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// RSVP Pie Chart
const ctx = document.getElementById('rsvpChart').getContext('2d');
const rsvpChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['Confirmados', 'Não Confirmados', 'Pendentes'],
        datasets: [{
            data: [{{ stats.confirmados }}, {{ stats.nao_confirmados }}, {{ stats.pendentes }}],
            backgroundColor: [
                'var(--success)',
                'var(--error)',
                'var(--warning)'
            ],
            borderWidth: 0,
            cutout: '60%'
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                display: false
            }
        }
    }
});

// Auto refresh every 5 minutes
setInterval(function() {
    location.reload();
}, 300000);

// Real-time stats update (disabled - admin.api_stats route not implemented)
/*
function updateStats() {
    fetch('/admin/api_stats') // URL hardcoded instead of url_for
        .then(response => response.json())
        .then(data => {
            // Update stat numbers
            document.querySelectorAll('.stat-number').forEach((el, index) => {
                switch(index) {
                    case 0: el.textContent = data.total_convidados; break;
                    case 1: el.textContent = data.confirmados; break;
                    case 2: el.textContent = data.nao_confirmados; break;
                    case 3: el.textContent = data.presentes_escolhidos; break;
                }
            });
            
            // Update chart
            rsvpChart.data.datasets[0].data = [data.confirmados, data.nao_confirmados, data.pendentes];
            rsvpChart.update();
        })
        .catch(error => console.error('Error updating stats:', error));
}

// Update stats every minute
setInterval(updateStats, 60000);
*/
</script>

<style>
.admin-header {
    background: var(--white);
    border-bottom: 1px solid var(--secondary-color);
    padding: 2rem 0;
    margin-top: 80px;
}

.admin-header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 2rem;
}

.admin-page-title {
    font-size: 2rem;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 0.5rem;
}

.admin-page-title i {
    color: var(--primary-color);
    margin-right: 0.75rem;
}

.admin-page-subtitle {
    color: var(--text-light);
    font-size: 1.1rem;
}

.admin-actions {
    display: flex;
    gap: 1rem;
}

.admin-stats {
    padding: 2rem 0;
    background: var(--background);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
}

.stat-card {
    background: var(--white);
    border-radius: 15px;
    padding: 1.5rem;
    box-shadow: var(--shadow-light);
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-medium);
}

.stat-icon {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: var(--white);
}

.stat-icon.presence { background: linear-gradient(135deg, #667eea, #764ba2); }
.stat-icon.confirmed { background: linear-gradient(135deg, #4CAF50, #45a049); }
.stat-icon.declined { background: linear-gradient(135deg, #f44336, #e53935); }
.stat-icon.gifts { background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); }

.stat-number {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-dark);
    line-height: 1;
}

.stat-label {
    color: var(--text-light);
    font-size: 0.9rem;
    margin-top: 0.25rem;
}

.admin-quick-actions,
.admin-recent,
.admin-charts {
    padding: 2rem 0;
}

.quick-actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.quick-action-card {
    background: var(--white);
    border-radius: 15px;
    padding: 1.5rem;
    box-shadow: var(--shadow-light);
    display: flex;
    align-items: center;
    gap: 1rem;
    text-decoration: none;
    color: inherit;
    transition: all 0.3s ease;
}

.quick-action-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-medium);
    text-decoration: none;
    color: inherit;
}

.action-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    font-size: 1.25rem;
}

.action-content h3 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    color: var(--text-dark);
}

.action-content p {
    color: var(--text-light);
    font-size: 0.9rem;
    margin: 0;
}

.action-arrow {
    margin-left: auto;
    color: var(--primary-color);
    font-size: 1.25rem;
}

.admin-content-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
}

.admin-card {
    background: var(--white);
    border-radius: 15px;
    box-shadow: var(--shadow-light);
    overflow: hidden;
}

.card-header {
    padding: 1.5rem;
    border-bottom: 1px solid var(--secondary-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-dark);
    margin: 0;
}

.card-title i {
    color: var(--primary-color);
    margin-right: 0.5rem;
}

.card-link {
    color: var(--primary-color);
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 500;
}

.card-content {
    padding: 1.5rem;
}

.activity-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.activity-item {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.activity-avatar {
    width: 40px;
    height: 40px;
    background: var(--secondary-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
}

.activity-title {
    font-weight: 500;
    color: var(--text-dark);
    margin-bottom: 0.25rem;
}

.activity-meta {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.85rem;
}

.status {
    padding: 0.25rem 0.5rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
}

.status.confirmed {
    background: rgba(76, 175, 80, 0.1);
    color: #4CAF50;
}

.status.declined {
    background: rgba(244, 67, 54, 0.1);
    color: #f44336;
}

.activity-time,
.activity-person {
    color: var(--text-light);
}

.empty-state-small {
    text-align: center;
    padding: 2rem;
    color: var(--text-light);
}

.empty-state-small i {
    font-size: 2rem;
    margin-bottom: 1rem;
    opacity: 0.5;
}

.chart-container {
    height: 300px;
    position: relative;
}

.chart-legend {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-top: 1rem;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

.legend-color {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.legend-color.confirmed { background: var(--success); }
.legend-color.declined { background: var(--error); }
.legend-color.pending { background: var(--warning); }

.progress-stats {
    margin-bottom: 1.5rem;
}

.progress-item {
    margin-bottom: 1rem;
}

.progress-label {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    font-weight: 500;
}

.progress-bar {
    height: 8px;
    background: var(--secondary-color);
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    transition: width 0.3s ease;
}

.progress-percent {
    margin-top: 0.5rem;
    text-align: right;
    font-size: 0.85rem;
    color: var(--text-light);
}

.gifts-summary {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    margin-top: 1.5rem;
}

.summary-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-align: center;
}

.summary-item i {
    color: var(--primary-color);
    font-size: 1.25rem;
}

.summary-number {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-dark);
}

.summary-label {
    font-size: 0.8rem;
    color: var(--text-light);
}

@media (max-width: 768px) {
    .admin-header-content {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .admin-actions {
        width: 100%;
        justify-content: flex-end;
    }
    
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .quick-actions-grid {
        grid-template-columns: 1fr;
    }
    
    .admin-content-grid {
        grid-template-columns: 1fr;
    }
    
    .gifts-summary {
        grid-template-columns: 1fr;
    }
}

/* Modal de Configurações */
.config-modal {
    max-width: 800px;
    max-height: 90vh;
    overflow-y: auto;
}

.config-section {
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border-color);
}

.config-section:last-child {
    border-bottom: none;
    margin-bottom: 1rem;
}

.section-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.1rem;
    color: var(--highlight-color);
    margin-bottom: 1rem;
    font-weight: 600;
}

.config-modal .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1rem;
}

.config-modal .form-group {
    margin-bottom: 1rem;
}

.config-modal .form-group label {
    display: block;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
}

.config-modal input,
.config-modal textarea {
    width: 100%;
    padding: 0.7rem;
    border: 2px solid var(--border-color);
    border-radius: 6px;
    font-size: 0.95rem;
    transition: border-color 0.3s ease;
    font-family: var(--font-main);
}

.config-modal input:focus,
.config-modal textarea:focus {
    outline: none;
    border-color: var(--highlight-color);
}

.config-modal input[type="color"] {
    height: 40px;
    padding: 2px;
    cursor: pointer;
}

.config-modal .form-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border-color);
    margin-top: 1.5rem;
}

.quick-action-card {
    background: none;
    border: none;
    width: 100%;
    text-align: left;
    cursor: pointer;
}

@media (max-width: 768px) {
    .config-modal .form-row {
        grid-template-columns: 1fr;
    }
    
    .config-modal {
        max-width: 95%;
        margin: 1rem;
    }
    
    .config-modal .form-actions {
        flex-direction: column;
    }
}
</style>

<!-- Modal de Configurações -->
<div class="modal-overlay" id="configModal">
    <div class="modal-container config-modal">
        <div class="modal-header">
            <h3 class="modal-title">
                <i class="fas fa-cog"></i>
                Configurações do Site
            </h3>
            <button class="modal-close" onclick="closeConfigModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="modal-body">
            <form id="configForm" method="POST" action="{{ url_for('admin.processar_configuracoes') }}">
                <!-- Informações dos Noivos -->
                <div class="config-section">
                    <h4 class="section-title">
                        <i class="fas fa-heart"></i>
                        Informações dos Noivos
                    </h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome_noiva">Nome da Noiva *</label>
                            <input type="text" id="nome_noiva" name="nome_noiva" 
                                   value="{{ config.nome_noiva or 'Iara' }}" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="nome_noivo">Nome do Noivo *</label>
                            <input type="text" id="nome_noivo" name="nome_noivo" 
                                   value="{{ config.nome_noivo or 'Samuel' }}" required>
                        </div>
                    </div>
                </div>

                <!-- Informações do Evento -->
                <div class="config-section">
                    <h4 class="section-title">
                        <i class="fas fa-calendar-alt"></i>
                        Informações do Evento
                    </h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="data_casamento">Data do Casamento</label>
                            <input type="date" id="data_casamento" name="data_casamento" 
                                   value="{{ config.data_casamento.strftime('%Y-%m-%d') if config.data_casamento else '2025-11-08' }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="horario_cerimonia">Horário da Cerimônia</label>
                            <input type="time" id="horario_cerimonia" name="horario_cerimonia" 
                                   value="{{ config.horario_cerimonia.strftime('%H:%M') if config.horario_cerimonia else '19:00' }}">
                        </div>
                    </div>
                </div>

                <!-- Local da Cerimônia -->
                <div class="config-section">
                    <h4 class="section-title">
                        <i class="fas fa-church"></i>
                        Local da Cerimônia
                    </h4>
                    
                    <div class="form-group">
                        <label for="local_cerimonia">Nome do Local</label>
                        <input type="text" id="local_cerimonia" name="local_cerimonia" 
                               value="{{ config.local_cerimonia or 'Igreja Nossa Senhora das Graças' }}">
                    </div>
                    
                    <div class="form-group">
                        <label for="endereco_cerimonia">Endereço Completo</label>
                        <textarea id="endereco_cerimonia" name="endereco_cerimonia" rows="2">{{ config.endereco_cerimonia or 'Rua Domingos Alcíno Dadalto, 114, Jardim Itapemirim, Cachoeiro de Itapemirim - ES' }}</textarea>
                    </div>
                </div>

                <!-- Local da Festa -->
                <div class="config-section">
                    <h4 class="section-title">
                        <i class="fas fa-glass-cheers"></i>
                        Local da Festa/Recepção
                    </h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="local_festa">Nome do Local</label>
                            <input type="text" id="local_festa" name="local_festa" 
                                   value="{{ config.local_festa or 'Salão de Festas' }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="horario_festa">Horário da Festa</label>
                            <input type="time" id="horario_festa" name="horario_festa" 
                                   value="{{ config.horario_festa.strftime('%H:%M') if config.horario_festa else '20:30' }}">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="endereco_festa">Endereço Completo</label>
                        <textarea id="endereco_festa" name="endereco_festa" rows="2">{{ config.endereco_festa or 'Endereço da festa/recepção' }}</textarea>
                    </div>
                </div>

                <!-- Personalização -->
                <div class="config-section">
                    <h4 class="section-title">
                        <i class="fas fa-palette"></i>
                        Personalização
                    </h4>
                    
                    <div class="form-group">
                        <label for="mensagem_principal">Mensagem Principal do Site</label>
                        <textarea id="mensagem_principal" name="mensagem_principal" rows="3">{{ config.mensagem_principal or 'Criamos esse site para compartilhar com vocês os detalhes da organização do nosso casamento. ♥' }}</textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="cor_tema">Cor do Tema</label>
                            <input type="color" id="cor_tema" name="cor_tema" 
                                   value="{{ config.cor_tema or '#B91C1C' }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="foto_casal">URL da Foto do Casal</label>
                            <input type="url" id="foto_casal" name="foto_casal" 
                                   value="{{ config.foto_casal or '' }}" placeholder="https://i.imgur.com/exemplo.jpg">
                            <small class="form-help">
                                <i class="fas fa-info-circle"></i>
                                <strong>Importante:</strong> Use apenas links diretos para imagens (terminam em .jpg, .png, .gif). 
                                Links do Instagram, Facebook ou Google Photos não funcionam. 
                                Recomendamos usar <a href="https://imgur.com" target="_blank">Imgur</a> para hospedar suas fotos.
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Informações da Noiva -->
                <div class="config-section">
                    <h4 class="section-title">
                        <i class="fas fa-female"></i>
                        Sobre a Noiva
                    </h4>
                    
                    <div class="form-group">
                        <label for="descricao_noiva">Descrição da Noiva</label>
                        <textarea id="descricao_noiva" name="descricao_noiva" rows="3" placeholder="Uma mulher de fé, cheia de sonhos e amor no coração...">{{ config.descricao_noiva or '' }}</textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="aniversario_noiva">Aniversário da Noiva</label>
                            <input type="text" id="aniversario_noiva" name="aniversario_noiva" 
                                   value="{{ config.aniversario_noiva or '' }}" placeholder="15 de Março">
                        </div>
                        
                        <div class="form-group">
                            <label for="paixoes_noiva">Paixões da Noiva</label>
                            <input type="text" id="paixoes_noiva" name="paixoes_noiva" 
                                   value="{{ config.paixoes_noiva or '' }}" placeholder="Família, culinária e música">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="frase_noiva">Frase da Noiva</label>
                            <input type="text" id="frase_noiva" name="frase_noiva" 
                                   value="{{ config.frase_noiva or '' }}" placeholder="O amor é a ponte entre duas almas">
                        </div>
                        
                        <div class="form-group">
                            <label for="foto_noiva">URL da Foto da Noiva</label>
                            <input type="url" id="foto_noiva" name="foto_noiva" 
                                   value="{{ config.foto_noiva or '' }}" placeholder="https://i.imgur.com/noiva.jpg">
                            <small class="form-help">
                                <i class="fas fa-info-circle"></i>
                                Use apenas links diretos para imagens. Evite links do Instagram ou Google Photos.
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Informações do Noivo -->
                <div class="config-section">
                    <h4 class="section-title">
                        <i class="fas fa-male"></i>
                        Sobre o Noivo
                    </h4>
                    
                    <div class="form-group">
                        <label for="descricao_noivo">Descrição do Noivo</label>
                        <textarea id="descricao_noivo" name="descricao_noivo" rows="3" placeholder="Um homem dedicado, com coração generoso e sorriso que ilumina...">{{ config.descricao_noivo or '' }}</textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="aniversario_noivo">Aniversário do Noivo</label>
                            <input type="text" id="aniversario_noivo" name="aniversario_noivo" 
                                   value="{{ config.aniversario_noivo or '' }}" placeholder="22 de Julho">
                        </div>
                        
                        <div class="form-group">
                            <label for="paixoes_noivo">Paixões do Noivo</label>
                            <input type="text" id="paixoes_noivo" name="paixoes_noivo" 
                                   value="{{ config.paixoes_noivo or '' }}" placeholder="Esportes, tecnologia e viagens">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="frase_noivo">Frase do Noivo</label>
                            <input type="text" id="frase_noivo" name="frase_noivo" 
                                   value="{{ config.frase_noivo or '' }}" placeholder="Juntos somos mais fortes">
                        </div>
                        
                        <div class="form-group">
                            <label for="foto_noivo">URL da Foto do Noivo</label>
                            <input type="url" id="foto_noivo" name="foto_noivo" 
                                   value="{{ config.foto_noivo or '' }}" placeholder="https://i.imgur.com/noivo.jpg">
                            <small class="form-help">
                                <i class="fas fa-info-circle"></i>
                                Use apenas links diretos para imagens. Evite links do Instagram ou Google Photos.
                            </small>
                        </div>
                    </div>
                </div>

                <!-- História de Amor -->
                <div class="config-section">
                    <h4 class="section-title">
                        <i class="fas fa-heart"></i>
                        Nossa História de Amor
                    </h4>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="mostrar_historia" name="mostrar_historia" 
                                   {{ 'checked' if config.mostrar_historia is not defined or config.mostrar_historia else '' }}>
                            Mostrar a seção "Nossa História de Amor" no site
                        </label>
                        <small>Desmarque se não quiser mostrar a linha do tempo da história do casal</small>
                    </div>
                    
                    <div id="historia_fields" style="{{ 'display: none;' if config.mostrar_historia is defined and not config.mostrar_historia else '' }}">
                        <!-- Primeiro Encontro -->
                        <div class="timeline-config">
                            <h5>O Primeiro Encontro</h5>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="primeiro_encontro_ano">Ano</label>
                                    <input type="text" id="primeiro_encontro_ano" name="primeiro_encontro_ano" 
                                           value="{{ config.primeiro_encontro_ano or '2020' }}" placeholder="2020">
                                </div>
                                <div class="form-group">
                                    <label for="primeiro_encontro_texto">História</label>
                                    <textarea id="primeiro_encontro_texto" name="primeiro_encontro_texto" rows="2" placeholder="Foi em uma tarde de domingo...">{{ config.primeiro_encontro_texto or '' }}</textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Namoro -->
                        <div class="timeline-config">
                            <h5>O Namoro</h5>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="namoro_ano">Ano</label>
                                    <input type="text" id="namoro_ano" name="namoro_ano" 
                                           value="{{ config.namoro_ano or '2022' }}" placeholder="2022">
                                </div>
                                <div class="form-group">
                                    <label for="namoro_texto">História</label>
                                    <textarea id="namoro_texto" name="namoro_texto" rows="2" placeholder="Depois de dois anos de amizade...">{{ config.namoro_texto or '' }}</textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- O Pedido -->
                        <div class="timeline-config">
                            <h5>O Pedido</h5>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="pedido_ano">Ano</label>
                                    <input type="text" id="pedido_ano" name="pedido_ano" 
                                           value="{{ config.pedido_ano or '2024' }}" placeholder="2024">
                                </div>
                                <div class="form-group">
                                    <label for="pedido_texto">História</label>
                                    <textarea id="pedido_texto" name="pedido_texto" rows="2" placeholder="Em uma noite estrelada...">{{ config.pedido_texto or '' }}</textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- O Grande Dia -->
                        <div class="timeline-config">
                            <h5>O Grande Dia</h5>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="grande_dia_ano">Ano</label>
                                    <input type="text" id="grande_dia_ano" name="grande_dia_ano" 
                                           value="{{ config.grande_dia_ano or '2025' }}" placeholder="2025">
                                </div>
                                <div class="form-group">
                                    <label for="grande_dia_texto">História</label>
                                    <textarea id="grande_dia_texto" name="grande_dia_texto" rows="2" placeholder="E agora chegou o momento...">{{ config.grande_dia_texto or '' }}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botões de Ação -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-confirm">
                        <i class="fas fa-save"></i>
                        Salvar Configurações
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeConfigModal()">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
// Funções do modal de configurações
function openConfigModal() {
    document.getElementById('configModal').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeConfigModal() {
    document.getElementById('configModal').classList.remove('active');
    document.body.style.overflow = '';
}

// Função para mostrar/ocultar campos da história de amor
function toggleHistoriaFields() {
    const checkbox = document.getElementById('mostrar_historia');
    const fields = document.getElementById('historia_fields');
    
    if (checkbox.checked) {
        fields.style.display = 'block';
    } else {
        fields.style.display = 'none';
    }
}

// Event listeners
document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('configModal');
    
    // Configurar o checkbox da história
    const historiaCheckbox = document.getElementById('mostrar_historia');
    if (historiaCheckbox) {
        historiaCheckbox.addEventListener('change', toggleHistoriaFields);
        // Configurar estado inicial
        toggleHistoriaFields();
    }
    
    // Fechar ao clicar na overlay
    modal.addEventListener('click', function(e) {
        if (e.target === modal) {
            closeConfigModal();
        }
    });
    
    // Fechar com ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeConfigModal();
        }
    });
    
    // Validação do formulário
    document.getElementById('configForm').addEventListener('submit', function(e) {
        const required = this.querySelectorAll('input[required]');
        let valid = true;
        
        required.forEach(input => {
            if (!input.value.trim()) {
                input.style.borderColor = '#f44336';
                valid = false;
            } else {
                input.style.borderColor = '';
            }
        });
        
        if (!valid) {
            e.preventDefault();
            alert('Por favor, preencha todos os campos obrigatórios.');
        }
    });
});

// ===== MODAL DE GERENCIAMENTO DE CONVIDADOS =====

function openGuestsModal() {
    const modal = document.getElementById('guestsModal');
    modal.style.display = 'flex';
    loadGuests();
}

function closeGuestsModal() {
    const modal = document.getElementById('guestsModal');
    modal.style.display = 'none';
}

function loadGuests() {
    fetch('/admin/api/convidados')
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            displayGuests(data.convidados);
            updateGuestStats(data.stats);
        }
    })
    .catch(error => console.error('Erro ao carregar convidados:', error));
}

function displayGuests(guests) {
    const tbody = document.getElementById('guestsTableBody');
    tbody.innerHTML = '';
    
    guests.forEach(guest => {
        const row = document.createElement('tr');
        row.className = 'guest-row';
        row.innerHTML = `
            <td class="guest-name">
                <strong>${guest.nome}</strong>
                <small>${guest.token.substring(0, 8)}...</small>
            </td>
            <td class="guest-contact">
                ${guest.email ? `<div><i class="fas fa-envelope"></i> ${guest.email}</div>` : ''}
                ${guest.telefone ? `<div><i class="fas fa-phone"></i> ${guest.telefone}</div>` : ''}
            </td>
            <td class="guest-status">
                <span class="status-badge ${guest.confirmacao ? 'confirmed' : 'pending'}">
                    <i class="fas fa-${guest.confirmacao ? 'check-circle' : 'clock'}"></i>
                    ${guest.confirmacao ? 'Confirmado' : 'Pendente'}
                </span>
            </td>
            <td class="guest-companions">${guest.numero_acompanhantes || 0}</td>
            <td class="guest-reception">
                <label class="toggle-switch">
                    <input type="checkbox" ${guest.liberado_recepcao ? 'checked' : ''} 
                           onchange="toggleReception(${guest.id}, this.checked)">
                    <span class="toggle-slider"></span>
                </label>
            </td>
            <td class="guest-actions">
                <button onclick="editGuest(${guest.id})" class="btn-action btn-edit" title="Editar">
                    <i class="fas fa-edit"></i>
                </button>
                <button onclick="copyGuestLink('${guest.token}')" class="btn-action btn-link" title="Copiar Link">
                    <i class="fas fa-link"></i>
                </button>
                <button onclick="deleteGuest(${guest.id}, '${guest.nome}')" class="btn-action btn-delete" title="Excluir">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        tbody.appendChild(row);
    });
}

function updateGuestStats(stats) {
    document.getElementById('totalGuests').textContent = stats.total;
    document.getElementById('confirmedGuests').textContent = stats.confirmados;
    document.getElementById('pendingGuests').textContent = stats.pendentes;
    document.getElementById('receptionGuests').textContent = stats.liberados;
}

function toggleReception(guestId, enabled) {
    fetch(`/admin/convidados/${guestId}/toggle-recepcao`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ enabled: enabled })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showNotification(data.message, 'success');
        } else {
            showNotification(data.message || 'Erro ao atualizar', 'error');
        }
    });
}

function editGuest(guestId) {
    // Fechar modal atual e abrir formulário de edição
    closeGuestsModal();
    window.location.href = `/admin/convidados/${guestId}/editar`;
}

function copyGuestLink(token) {
    const link = `${window.location.origin}/convite/${token}`;
    navigator.clipboard.writeText(link).then(() => {
        showNotification('Link copiado!', 'success');
    });
}

function deleteGuest(guestId, guestName) {
    if (confirm(`Tem certeza que deseja excluir o convidado "${guestName}"?`)) {
        fetch(`/admin/convidados/${guestId}/excluir`, { method: 'DELETE' })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showNotification(data.message, 'success');
                loadGuests(); // Recarregar lista
            } else {
                showNotification(data.message || 'Erro ao excluir', 'error');
            }
        });
    }
}

function filterGuests() {
    const searchTerm = document.getElementById('guestSearch').value.toLowerCase();
    const rows = document.querySelectorAll('.guest-row');
    
    rows.forEach(row => {
        const name = row.querySelector('.guest-name strong').textContent.toLowerCase();
        if (name.includes(searchTerm)) {
            row.style.display = '';
        } else {
            row.style.display = 'none';
        }
    });
}

function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; padding: 12px 20px;
        border-radius: 6px; color: white; font-weight: 500; z-index: 9999;
        ${type === 'success' ? 'background: #4caf50;' : 'background: #f44336;'}
    `;
    document.body.appendChild(notification);
    setTimeout(() => notification.remove(), 3000);
}
</script>

<!-- Modal de Gerenciamento de Convidados -->
<div id="guestsModal" class="guests-modal" style="display: none;">
    <div class="modal-content-large">
        <div class="modal-header">
            <h2>
                <i class="fas fa-users"></i>
                Gerenciar Convidados
            </h2>
            <button onclick="closeGuestsModal()" class="modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Estatísticas -->
        <div class="guest-stats">
            <div class="stat-item">
                <span class="stat-number" id="totalGuests">0</span>
                <span class="stat-label">Total</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="confirmedGuests">0</span>
                <span class="stat-label">Confirmados</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="pendingGuests">0</span>
                <span class="stat-label">Pendentes</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="receptionGuests">0</span>
                <span class="stat-label">Recepção</span>
            </div>
        </div>
        
        <!-- Controles -->
        <div class="guest-controls">
            <div class="search-container">
                <i class="fas fa-search"></i>
                <input type="text" id="guestSearch" placeholder="Buscar convidados..." onkeyup="filterGuests()">
            </div>
            <a href="/admin/convidados/adicionar" class="btn btn-primary">
                <i class="fas fa-plus"></i>
                Adicionar Convidado
            </a>
        </div>
        
        <!-- Tabela de Convidados -->
        <div class="guests-table-container">
            <table class="guests-table">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Contato</th>
                        <th>Status</th>
                        <th>Acompanhantes</th>
                        <th>Recepção</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody id="guestsTableBody">
                    <!-- Conteúdo carregado via JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
/* Estilos para botões como links */
.action-button, .link-button {
    background: none;
    border: none;
    cursor: pointer;
    font: inherit;
    color: inherit;
    text-decoration: none;
    padding: 0;
    display: flex;
    align-items: center;
    width: 100%;
    text-align: left;
}

.action-button {
    padding: 1.5rem;
    border-radius: 12px;
    transition: all 0.3s ease;
}

.action-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.link-button {
    color: var(--primary);
    font-size: 0.875rem;
    font-weight: 500;
}

.link-button:hover {
    color: var(--primary-dark);
}

/* Modal Styles */
.guests-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-content-large {
    background: white;
    border-radius: 12px;
    max-width: 1200px;
    max-height: 90vh;
    width: 95%;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.modal-header {
    padding: 20px 30px;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #f9fafb;
}

.modal-header h2 {
    margin: 0;
    display: flex;
    align-items: center;
    gap: 8px;
    color: #111827;
}

.modal-close {
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: #6b7280;
    padding: 4px;
}

.guest-stats {
    display: flex;
    padding: 20px 30px;
    gap: 30px;
    background: #f9fafb;
    border-bottom: 1px solid #e5e7eb;
}

.stat-item {
    text-align: center;
}

.stat-number {
    display: block;
    font-size: 24px;
    font-weight: 700;
    color: var(--primary);
}

.stat-label {
    font-size: 12px;
    color: #6b7280;
    text-transform: uppercase;
    font-weight: 500;
}

.guest-controls {
    padding: 20px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    border-bottom: 1px solid #e5e7eb;
}

.search-container {
    position: relative;
    flex: 1;
    max-width: 300px;
}

.search-container i {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #9ca3af;
}

.search-container input {
    width: 100%;
    padding: 10px 10px 10px 35px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 14px;
}

.guests-table-container {
    flex: 1;
    overflow: auto;
    padding: 0 30px 30px;
}

.guests-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.guests-table th {
    background: #f9fafb;
    padding: 12px;
    text-align: left;
    font-weight: 600;
    color: #374151;
    border-bottom: 2px solid #e5e7eb;
    font-size: 14px;
}

.guests-table td {
    padding: 12px;
    border-bottom: 1px solid #e5e7eb;
    vertical-align: middle;
}

.guest-row:hover {
    background: #f9fafb;
}

.guest-name strong {
    display: block;
    color: #111827;
    font-weight: 600;
}

.guest-name small {
    color: #9ca3af;
    font-size: 11px;
    font-family: monospace;
}

.guest-contact div {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 2px;
    font-size: 12px;
    color: #6b7280;
}

.status-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
}

.status-badge.confirmed {
    background: #d1fae5;
    color: #065f46;
}

.status-badge.pending {
    background: #fef3c7;
    color: #92400e;
}

.guest-companions {
    text-align: center;
    font-weight: 600;
    color: #374151;
}

.toggle-switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 20px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: 0.3s;
    border-radius: 20px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 14px;
    width: 14px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
    background-color: var(--primary);
}

.toggle-switch input:checked + .toggle-slider:before {
    transform: translateX(20px);
}

.guest-actions {
    display: flex;
    gap: 4px;
}

.btn-action {
    width: 28px;
    height: 28px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    transition: all 0.2s ease;
}

.btn-edit {
    background: #fef3c7;
    color: #d97706;
}

.btn-link {
    background: #d1fae5;
    color: #059669;
}

.btn-delete {
    background: #fee2e2;
    color: #dc2626;
}

.btn-action:hover {
    transform: scale(1.1);
}

/* Responsivo */
@media (max-width: 768px) {
    .modal-content-large {
        width: 98%;
        max-height: 95vh;
    }
    
    .guest-controls {
        flex-direction: column;
        align-items: stretch;
    }
    
    .search-container {
        max-width: none;
    }
    
    .guests-table-container {
        padding: 0 15px 20px;
    }
    
    .guests-table {
        font-size: 12px;
    }
    
    .guests-table th,
    .guests-table td {
        padding: 8px 4px;
    }
}
</style>
{% endblock %}
